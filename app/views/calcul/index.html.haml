!!!
%html{ "xml:lang" => "fr", :lang => "fr", :xmlns => "http://www.w3.org/1999/xhtml" }
  %head
    %title
      Structure Computation
      
    / Balises META   
    %meta{ :content => "text/html; charset=utf-8", "http-equiv" => "Content-Type" }
    %meta{ :name => "title", :content => "Structure Computation" }
    %meta{ :name => "language", :content => "fr" }
    %meta{ :name => "robots", :content => "index, follow" }
    
    / Liens vers les CSS
    %link{ :href => "/stylesheets/main_compute.css", :rel => "stylesheet", :media => "screen" }

    / Javascripts
    %script{ :src => "/javascripts/sources_ext/jquery-1.3.2.js", :type => "text/javascript" }
    %script{ :src => "/javascripts/sources_ext/jquery.form.js" ,   :type => "text/javascript" }
    %script{ :src => "/javascripts/calcul/init_calcul.js", :type => "text/javascript" }
    %script{ :src => "/javascripts/calcul/functions_layer_calcul.js", :type => "text/javascript" }
    %script{ :src => "/javascripts/texteutils.js", :type => "text/javascript" }
    %script{ :src => "/javascripts/calcul/NC_etape_initialisation/functions_init.js", :type => "text/javascript" }
    %script{ :src => "/javascripts/calcul/NC_etape_initialisation/functions_requette_init.js", :type => "text/javascript" }
    %script{ :src => "/javascripts/calcul/NC_etape_temporelle/functions_temporelle.js", :type => "text/javascript" }
    %script{ :src => "/javascripts/calcul/NC_etape_materiaux/functions_mat.js", :type => "text/javascript" }
    %script{ :src => "/javascripts/calcul/NC_etape_materiaux/functions_requette_mat.js", :type => "text/javascript" }
    %script{ :src => "/javascripts/calcul/NC_etape_liaisons/functions_liaison.js", :type => "text/javascript" }
    %script{ :src => "/javascripts/calcul/NC_etape_liaisons/functions_requette_liaison.js", :type => "text/javascript" }
    %script{ :src => "/javascripts/calcul/NC_etape_CLs/functions_CL.js", :type => "text/javascript" }
    %script{ :src => "/javascripts/calcul/NC_etape_CLs/functions_requette_CL.js", :type => "text/javascript" }
    %script{ :src => "/javascripts/calcul/NC_etape_options/functions_options.js", :type => "text/javascript" }
    %script{ :src => "/javascripts/calcul/NC_etape_previsions/functions_previsions.js", :type => "text/javascript" }
    %script{ :src => "/javascripts/calcul/NC_prop/functions_prop.js", :type => "text/javascript" }
    %script{ :src => "/javascripts/visualisation/functions_visu.js", :type => "text/javascript" }
    /%script{ :src => "/javascripts/imgserver.js", :type => "text/javascript" }
    %script{ :src => "/javascripts/img_gl_server.js", :type => "text/javascript" }

  %body
    #conteneur
      = render :partial => "layouts/header"
      / partie content_top
      #NC_content_top
      / fin partie content_top
      
      / partie contenu
      #NC_content
        / bar de progression
        = render :partial => "progressbar"
        / fin bar de prograssion
        
      #NC_content
        / marge
        #NC_contentmarge
        / fin marge
        
        / partie gauche du contenu, raccourci
        #NC_contentleft
          / hauteur minimum du contenu
          .contentheightmin
          = render :partial => "calcul/NC_etape_initialisation/box_left"
          = render :partial => "calcul/NC_etape_temporelle/box_left"
          = render :partial => "calcul/NC_etape_materiaux/box_left"
          = render :partial => "calcul/NC_etape_liaisons/box_left"
          = render :partial => "calcul/NC_etape_CLs/box_left"
          = render :partial => "calcul/NC_etape_options/box_left"
          = render :partial => "calcul/NC_etape_previsions/box_left"
        / fin partie gauche du contenu
        
        / partie centre fake du contenu, sert pour pousser vers le bas le footer, doit avoir la même taille que NC_contentcenter
        #fake_NC_contentcenter{ :style => "float:left; width:40px; height:10px" }
        / fin partie centre fake du contenu
        
        / partie centre du contenu, tableaux, informations importantes
        #NC_contentcenter.on
          / hauteur minimum du contenu
          .contentheightmin_1
          / #textetest{ :style => "float:left; width:650px; height:300px; border:thin solid #646464;" } 
          = render :partial => "calcul/nc_box_visu"	
          = render :partial => "calcul/nc_box_propriete"
          = render :partial => "calcul/NC_etape_initialisation/box_active"
          = render :partial => "calcul/NC_etape_temporelle/box_active"
          = render :partial => "calcul/NC_etape_materiaux/box_active"
          = render :partial => "calcul/NC_etape_liaisons/box_active"
          = render :partial => "calcul/NC_etape_CLs/box_active"
          = render :partial => "calcul/NC_etape_options/box_active"
          = render :partial => "calcul/NC_etape_previsions/box_active"
        / fin partie centre du contenu
        
        / partie droite du contenu, tableau des pieces, interface, bord...
        #NC_contentright.on
          / hauteur minimum du contenu
          .contentheightmin
          = render :partial => "calcul/NC_etape_materiaux/box_right"
          = render :partial => "calcul/NC_etape_liaisons/box_right"
          = render :partial => "calcul/NC_etape_CLs/box_right"
        / fin partie droite du contenu
        
        / scrollbar du contenu, raccourci
        #NC_contentscrollbar.on
          #NC_scrollbar
            #NC_marge_scrollbar
            %a{ :onclick => "NC_scroll(NC_current_scroll)", :style => "cursor: pointer;" }
              #NC_slider_scrollbar_1
              #NC_slider_scrollbar
              #NC_slider_scrollbar_2
        / fin scrollbar du contenu
      / fin NC_content
      
      / partie haute du footer, bas de la boite projet plus bouton
      #NC_footer_top
        %a{ :href => "/modele" }
          #NC_footer_bouton_annuler.NC_footer_top_bouton
            Annuler
        %a{ :onclick => "complete_brouillon(true,false)", :style => "cursor: pointer;" }
          #NC_footer_bouton_sauver.NC_footer_top_bouton
            sauvegarde le brouillon
        
        #NC_footer_top_init.off
          %a{ :onclick => "next_stape()", :style => "cursor: pointer;" }
            #NC_footer_bouton_suivant.NC_footer_top_bouton
              Suivant
        #NC_footer_top_suiv.off
          %a{ :onclick => "previous_stape()", :style => "cursor: pointer;" }
            #NC_footer_bouton_precedent.NC_footer_top_bouton
              Précédent
          %a{ :onclick => "next_stape()", :style => "cursor: pointer;" }
            #NC_footer_bouton_suivant.NC_footer_top_bouton
              Suivant
        #NC_footer_top_valid.on
          %a{ :onclick => "complete_calcul()", :style => "cursor: pointer;" }
            #NC_footer_bouton_lancer.NC_footer_top_bouton
              valider et envoyer
      / fin partie haute du footer
      
      / partie basse du footer, mentions legale...
      #NC_footer
      / fin partie basse du footer
%script{ :type => "text/javascript" }
  model_id = #{@id_model};
  dim_model = #{@dim_model};
  $(document).ready(function() {get_info_model( #{@id_model} )});
  equal_height_NC_fake();
  $(document).ready(function() {get_Tableau_calcul( #{@id_model} )});
  $(document).ready(get_Tableau_mat);
  $(document).ready(get_Tableau_liaison);
  $(document).ready(get_Tableau_CL);
  $(document).ready(select_new_calcul);
  affiche_NC_page_initialisation();
  $(document).ready( function() { init_visualisation(); } );
  displayBlack("on");
  / alert("ok");